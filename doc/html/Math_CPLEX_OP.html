<html><head><title>Math::CPLEX::OP</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="http://search.cpan.org/s/style.css">

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018002 at Tue Nov  4 13:44:20 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#EXPORT'>EXPORT</a>
    <li class='indexItem indexItem2'><a href='#addcols'>addcols</a>
    <li class='indexItem indexItem2'><a href='#addindconstr'>addindconstr</a>
    <li class='indexItem indexItem2'><a href='#addqconstr'>addqconstr</a>
    <li class='indexItem indexItem2'><a href='#addrows'>addrows</a>
    <li class='indexItem indexItem2'><a href='#baropt'>baropt</a>
    <li class='indexItem indexItem2'><a href='#chgctype'>chgctype</a>
    <li class='indexItem indexItem2'><a href='#chgobj'>chgobj</a>
    <li class='indexItem indexItem2'><a href='#chgqpcoef'>chgqpcoef</a>
    <li class='indexItem indexItem2'><a href='#chgrhs'>chgrhs</a>
    <li class='indexItem indexItem2'><a href='#chgsense'>chgsense</a>
    <li class='indexItem indexItem2'><a href='#chglbs'>chglbs</a>
    <li class='indexItem indexItem2'><a href='#chgubs'>chgubs</a>
    <li class='indexItem indexItem2'><a href='#delcols'>delcols</a>
    <li class='indexItem indexItem2'><a href='#delrows'>delrows</a>
    <li class='indexItem indexItem2'><a href='#dualopt'>dualopt</a>
    <li class='indexItem indexItem2'><a href='#free'>free</a>
    <li class='indexItem indexItem2'><a href='#getnumbin'>getnumbin</a>
    <li class='indexItem indexItem2'><a href='#getnumcols'>getnumcols</a>
    <li class='indexItem indexItem2'><a href='#getnumint'>getnumint</a>
    <li class='indexItem indexItem2'><a href='#getnumnz'>getnumnz</a>
    <li class='indexItem indexItem2'><a href='#getnumrows'>getnumrows</a>
    <li class='indexItem indexItem2'><a href='#getobjsen'>getobjsen</a>
    <li class='indexItem indexItem2'><a href='#getobjval'>getobjval</a>
    <li class='indexItem indexItem2'><a href='#getqpcoef'>getqpcoef</a>
    <li class='indexItem indexItem2'><a href='#getsolnpoolnumreplaced'>getsolnpoolnumreplaced</a>
    <li class='indexItem indexItem2'><a href='#getsolnpoolnumsolns'>getsolnpoolnumsolns</a>
    <li class='indexItem indexItem2'><a href='#getsolnpoolobjval'>getsolnpoolobjval</a>
    <li class='indexItem indexItem2'><a href='#getsolnpoolx'>getsolnpoolx</a>
    <li class='indexItem indexItem2'><a href='#getstat'>getstat</a>
    <li class='indexItem indexItem2'><a href='#lpopt'>lpopt</a>
    <li class='indexItem indexItem2'><a href='#maximize'>maximize</a>
    <li class='indexItem indexItem2'><a href='#minimize'>minimize</a>
    <li class='indexItem indexItem2'><a href='#mipopt'>mipopt</a>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#newcols'>newcols</a>
    <li class='indexItem indexItem2'><a href='#populate'>populate</a>
    <li class='indexItem indexItem2'><a href='#primopt'>primopt</a>
    <li class='indexItem indexItem2'><a href='#qpopt'>qpopt</a>
    <li class='indexItem indexItem2'><a href='#setqpcoef'>setqpcoef</a>
    <li class='indexItem indexItem2'><a href='#solninfo'>solninfo</a>
    <li class='indexItem indexItem2'><a href='#solution'>solution</a>
    <li class='indexItem indexItem2'><a href='#solwrite'>solwrite</a>
    <li class='indexItem indexItem2'><a href='#solwritesolnpool'>solwritesolnpool</a>
    <li class='indexItem indexItem2'><a href='#solwritesolnpoolall'>solwritesolnpoolall</a>
    <li class='indexItem indexItem2'><a href='#writeprob'>writeprob</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Examples'>Examples</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Simple_linear_program'>Simple linear program</a>
    <li class='indexItem indexItem2'><a href='#Mixed_Integer_Linear_Program'>Mixed Integer Linear Program</a>
    <li class='indexItem indexItem2'><a href='#Linear_program_that_utilizes_CPLEX_populate_feature'>Linear program that utilizes CPLEX populate feature</a>
    <li class='indexItem indexItem2'><a href='#Optimization_problem_with_a_quadratic_objective_function'>Optimization problem with a quadratic objective function</a>
    <li class='indexItem indexItem2'><a href='#Optimization_problem_with_a_quadratic_constraint'>Optimization problem with a quadratic constraint</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Math::CPLEX::OP - Perl extension that allows to access some of CPLEX linear (and quadratic) programming functions.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use Math::CPLEX::OP;
  use Math::CPLEX::Env;

  # first we need to create a Math::CPLEX::Env object to obtain a CPLEX environment object
  $cplex_env = Math::CPLEX::Env-&#62;new();

  # create a linear programming object
  $lp = $cplex_env-&#62;createOP();

  # define if we want to minimize or maximize the objective function
  $lp-&#62;maximize();

  # define columns and objective function of linear program to be solved
  $cols = { num_cols  =&#62; 3,
            obj_coefs =&#62; [ 1.0,  0.5,  0.3],
            lower_bnd =&#62; [ 0.0,  1.0,  0.0],
            upper_bnd =&#62; [10.0,  9.0,  1.0],
            col_types =&#62; [ &#39;C&#39;,  &#39;I&#39;,  &#39;B&#39;],
            col_names =&#62; [&#39;c1&#39;, &#39;c2&#39;, &#39;c3&#39;] };
  $lp-&#62;newcols( $cols );

  # add rows of linear program
  $newRows-&#62;[0][0] = -0.3;
  $newRows-&#62;[0][2] =  1.3;
  $newRows-&#62;[1][0] =  0.7;
  $newRows-&#62;[1][1] = -1.3;
  $newRows-&#62;[1][2] =  2.9;
  $newRows-&#62;[2][1] =  2.0;
  $newRows-&#62;[2][2] = -3.1;
  $rows = {num_rows  =&#62; 3,
           rhs       =&#62; [0.25, 1.33, 0.8],
           sense     =&#62; [&#39;L&#39;, &#39;E&#39;, &#39;G&#39;],
           row_names =&#62; [&#34;row1&#34;, &#34;row2&#34;, &#34;row3&#34;],
           row_coefs =&#62; $newRows};
  $lp-&#62;addrows($rows);

  # write linear program to file
  $lp-&#62;writeprob(&#34;/tmp/linear_program.lp&#34;, &#34;LP&#34;);

  # solve linear program
  $lp-&#62;mipopt();

  # get solution status
  $lp-&#62;getstat();

  # retrieve optimal solution
  ($sol_status, $obj_val, @vals) = $lp-&#62;solution();

  # write solution to file
  $lp-&#62;solwrite(&#34;/tmp/lp_solution.txt&#34;);

  # free linear programming object
  $lp-&#62;free();

  # close CPLEX environment
  $cplex_env-&#62;close();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><code>Math::CPLEX::OP</code> is used to create, modify, solve, and free linear programs using CPLEX&#39;s C library. <code>Math::CPLEX::OP</code> uses <code>Math::CPLEX::Base</code> to communicate with the CPLEX C library. CPLEX is a commerical linear programming toolkit made by IBM. Naturally, CPLEX must be installed on your system if you want to use <code>Math::CPLEX::OP</code>, <code>Math::CPLEX::Env</code>, or <code>Math::CPLEX::Base</code>. At the time of writing IBM offers free academic licenses for CPLEX.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="EXPORT"
>EXPORT</a></h2>

<p>None by default.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addcols"
>addcols</a></h2>

<p>Add columns to optimization problem. The method assumes the data to be passed in form of a hash reference. The method returns <code>undef</code> if an error occurs. The following example adds to columns to an existing system.</p>

<pre>   my $cplex_unbounded = &#38;Math::CPLEX::Base::CPX_INFBOUND;
   my $obj_coefs = [-0.3, 1.7];
   my $lower_bnd = [0.7, 0.2];
   my $upper_bnd = [$cplex_unbounded, 7.8];
   my $col_names = [&#39;newc1&#39;, &#39;newc2&#39;];
   my $col_coefs = [ [-0.2,  0.6],
                     [ 1.4,  1.1],
                     [ 0.5, -0.8]];
   my $newcols;
   $newcols = {num_cols  =&#62; 2,
               obj_coefs =&#62; $obj_coefs,
               col_coefs =&#62; $col_coefs,
               lower_bnd =&#62; $lower_bnd,
               upper_bnd =&#62; $upper_bnd,
               col_names =&#62; $col_names,};
   $lp-&#62;addcols($newcols);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addindconstr"
>addindconstr</a></h2>

<p>Add an indicator constraint to the system. An indicator constraint is a linear constraint that is enforced only: (a) when an associated binary variable takes a value of 1, or (b) when an associated binary variable takes the value of 0 (zero) if the binary variable is complemented.</p>

<p>The linear constraint may be a less-than-or-equal-to constraint, a greater-than-or-equal-to constraint, or an equality constraint.</p>

<pre>   use Math::CPLEX::Env;
   use Math::CPLEX::Base;

   my $cplex_env = Math::CPLEX::Env-&#62;new();
   my $lp = $cplex_env-&#62;createOP();

   $lp-&#62;minimize();

   # define columns
   my $cols = { num_cols  =&#62; 12,
                lower_bnd =&#62; [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
                upper_bnd =&#62; [ $cplex_unbounded, $cplex_unbounded, $cplex_unbounded, $cplex_unbounded, $cplex_unbounded, $cplex_unbounded, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
                obj_coefs =&#62; [ 0.0, 0.0, 0.0, 0.0, 0.0, 5.0, 1.0, 1.0, 1.0, 10.0, 1.0, 1.0],
                col_types =&#62; [ &#39;C&#39;, &#39;C&#39;, &#39;C&#39;, &#39;C&#39;, &#39;C&#39;, &#39;C&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;],
                col_names =&#62; [&#39;x01&#39;, &#39;x02&#39;, &#39;x13&#39;, &#39;x14&#39;, &#39;x23&#39;, &#39;x24&#39;, &#39;f01&#39;, &#39;f02&#39;, &#39;f13&#39;, &#39;f14&#39;, &#39;f23&#39;, &#39;f24&#39;]};
   die &#34;ERROR: newcols() failed\n&#34; unless $lp-&#62;newcols( $cols );

   # define rows
   my $newRows;
   $newRows-&#62;[0][0] = -1.0;
   $newRows-&#62;[0][1] = -1.0;
   $newRows-&#62;[1][0] =  1.0;
   $newRows-&#62;[1][2] = -1.0;
   $newRows-&#62;[1][3] = -1.0;
   $newRows-&#62;[2][1] =  1.0;
   $newRows-&#62;[2][4] = -1.0;
   $newRows-&#62;[2][5] = -1.0;
   $newRows-&#62;[3][2] =  1.0;
   $newRows-&#62;[3][4] =  1.0;
   $newRows-&#62;[4][3] =  1.0;
   $newRows-&#62;[4][5] =  1.0;

   my $rows = {&#39;num_rows&#39;  =&#62; 5,
               &#39;rhs&#39;       =&#62; [-1_000_001, 0, 0, 1_000_000, 1],
               &#39;sense&#39;     =&#62; [&#39;G&#39;, &#39;G&#39;, &#39;G&#39;, &#39;G&#39;, &#39;G&#39;],
               &#39;row_names&#39; =&#62; [&#34;c1&#34;, &#34;c2&#34;, &#34;c3&#34;, &#34;c4&#34;, &#34;c5&#34;],
               &#39;row_coefs&#39; =&#62; $newRows};
   die &#34;ERROR: addrows() failed\n&#34; unless $lp-&#62;addrows($rows);

   # add indicator constraints
   for( my $i = 0; $i &#60; 6; $i++ )
   {
      my $val;
      $val-&#62;[$i] = 1.0;
      my $indconstr = {
                         indvar       =&#62; 6 + $i,
                         complemented =&#62; 1,
                         rhs          =&#62; 0.0,
                         sense        =&#62; &#39;L&#39;,
                         val          =&#62; $val,
                         name         =&#62; &#34;indicator$i&#34;,
                      };

      die &#34;ERROR: addindconstr() failed\n&#34; unless $lp-&#62;addindconstr($indconstr);
   }

   my $filename = &#34;/tmp/myCPLEX_indicator.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);</pre>

<p>The above code results in the following linear program which is written to the file &#39;/tmp/myCPLEX_indicator.lp&#39;:</p>

<pre>   \ENCODING=ISO-8859-1
   \Problem name: indicatorOP

   Minimize
    obj: 5 x24 + f01 + f02 + f13 + 10 f14 + f23 + f24
   Subject To
    c1: - x01 - x02 &#62;= -1000001
    c2: x01 - x13 - x14 &#62;= 0
    c3: x02 - x23 - x24 &#62;= 0
    c4: x13 + x23 &#62;= 1000000
    c5: x14 + x24 &#62;= 1
    indicator0: f01 = 0 -&#62; x01 &#60;= 0
    indicator1: f02 = 0 -&#62; x02 &#60;= 0
    indicator2: f13 = 0 -&#62; x13 &#60;= 0
    indicator3: f14 = 0 -&#62; x14 &#60;= 0
    indicator4: f23 = 0 -&#62; x23 &#60;= 0
    indicator5: f24 = 0 -&#62; x24 &#60;= 0
   Bounds
    0 &#60;= f01 &#60;= 1
    0 &#60;= f02 &#60;= 1
    0 &#60;= f13 &#60;= 1
    0 &#60;= f14 &#60;= 1
    0 &#60;= f23 &#60;= 1
    0 &#60;= f24 &#60;= 1
   Binaries
    f01  f02  f13  f14  f23  f24
   End</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addqconstr"
>addqconstr</a></h2>

<p>Add a constraint to the system that has a quadratic part. The method assumes that the data are passed in form of a has reference. The method returns <code>undef</code> if an error occurred. The quadratic constraint <i>new_quad: - 3 x1 + 1.5 x2 - 7.2 x3 + [ 0 * x1 - 2 x1 ^2 + 1.8 x1 * x2 - 1.5 x2 ^2 + 2.2 x2 * x3 - 1.3 x3 ^2 ] &#62; = 0.31415</i> can be added to the system as follows:</p>

<pre>   my $linval  = [-3.0,  1.5, -7.2];
   my $quadval = [[-2.0,  0.9,  0.0],
                  [ 0.9, -1.5,  1.1],
                  [ 0.0,  1.1, -1.3]];
   my $quad_constr = {linear =&#62; $linval,
                      rhs    =&#62; 0.31415,
                      sense  =&#62; &#39;G&#39;,
                      name   =&#62; &#39;new_quad&#39;,
                      quad   =&#62; $quadval};
   $lp-&#62;addqconstr($quad_constr);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="addrows"
>addrows</a></h2>

<p>Add rows to the optimization problem. The data are passed in form of a hash reference to the method. The method returns <code>undef</code> if an error occurred. Note that only the non-zero elements of the rows must be defined in the passed array containing the row coefficients (hash key: <code>row_coefs</code>).</p>

<pre>   my $newRows;
   $newRows-&#62;[0][0] = -0.3;
   $newRows-&#62;[0][2] =  1.3;
   $newRows-&#62;[1][0] =  0.7;
   $newRows-&#62;[1][1] = -1.3;
   $newRows-&#62;[1][2] =  2.9;
   $newRows-&#62;[2][1] =  2.0;
   $newRows-&#62;[2][2] = -3.1;
   my $rows = {&#39;num_rows&#39;  =&#62; 3,
               &#39;rhs&#39;       =&#62; [0.25, 1.33, 0.8],
               &#39;sense&#39;     =&#62; [&#39;L&#39;, &#39;E&#39;, &#39;G&#39;],
               &#39;row_names&#39; =&#62; [&#34;row1&#34;, &#34;row2&#34;, &#34;row3&#34;],
               &#39;row_coefs&#39; =&#62; $newRows};
   $lp-&#62;addrows($rows);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="baropt"
>baropt</a></h2>

<p>Optimize a given problem (linear, quadratic, or quadratic constraint) using the barrier algorithm. The method returns <code>undef</code> if an error occurred.</p>

<pre>   $lp-&#62;baropt();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chgctype"
>chgctype</a></h2>

<p>Change the type of columns. The method expects an array reference as input. Undefined values in the array are ignored by <code>chgctype</code>. CPLEX Version 12.5 supports the following column types:</p>

<pre>   CPX_CONTINUOUS   &#39;C&#39;    continuous
   CPX_BINARY       &#39;B&#39;    binary
   CPX_INTEGER      &#39;I&#39;    integer
   CPX_SEMICONT     &#39;S&#39;    semi-continuous
   CPX_SEMIINT      &#39;N&#39;    semi-integer</pre>

<p>In order to change the type of the first and the third column can be achieved as follows:</p>

<pre>   my $newctype = [&#39;B&#39;, undef , &#39;C&#39;];
   $lp-&#62;chgctype($newctype);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chgobj"
>chgobj</a></h2>

<p>Change the coefficients of the objective functions. The method expects an array reference as input. Undefined elements of the array are ignored by <code>chgobj</code>. The method returns <code>undef</code> if an error occurs. In order to change the second and third coefficient of the objective function the following code could be used:</p>

<pre>   my $newobjcoef-&#62;[1] = -0.7;
   my $newobjcoef-&#62;[2] =  2.1;
   $lp-&#62;chgobj($newobjcoef);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chgqpcoef"
>chgqpcoef</a></h2>

<p>Change the quadratic part of the objective function. The method expects three input parameters: a) row index, b) column index, and c) new coefficient. Note that if the row index <code>i</code> is not equal to the column index <code>j</code>, both values of the quadratix coefficient matrix (<code>Q(i,j)</code> and <code>Q(j,i)</code>) are changed to the new value. The method returns <code>undef</code> if an error occured.</p>

<pre>   # set the quadratic value of x1*x1 to -6
   my $row_idx = 1;
   my $col_idx = 1;
   my $new_val = -6;
   $lp-&#62;chgqpcoef($row_idx, $col_idx, $new_val);

   # set the mixed quadratic values of (2,3) and (3,2) to 4:
   $lp-&#62;chgqpcoef(2, 3, 5);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chgrhs"
>chgrhs</a></h2>

<p>Change the right hand side (rhs) of a set of constraints. The method expects the data to be passed in form of an array reference. Undefined values of the array are ignored by <code>chgrhs</code>. If an error occurred, the <code>undef</code> value is returned.</p>

<pre>   # system before changing the right hand side
   # cstr1: 3*x1 -2*x4 + 4x6 &#60;= 4
   # cstr2: -2*x2 + 3*x3 + 4*x4 &#62;= 3
   # cstr3: 2*x1 + 2.5*x5 -1.5*x6 = 2.5

   $newrhs-&#62;[0] = 2;
   $newrhs-&#62;[2] = 3;
   $lp-&#62;chgrhs($newrhs);

   # system after executing chgrhs()
   # cstr1: 3*x1 -2*x4 + 4x6 &#60;= 2
   # cstr2: -2*x2 + 3*x3 + 4*x4 &#62;= 3
   # cstr3: 2*x1 + 2.5*x5 -1.5*x6 = 3</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chgsense"
>chgsense</a></h2>

<p>Change the sense of a set of constraints. The method expects the data to be passed in form of an array reference. Undefined values of the array are ignored by <code>chgrhs</code>. If an error occurred, the <code>undef</code> value is returned.</p>

<pre>   # system before changing the right hand side
   # cstr1: 3*x1 -2*x4 + 4x6 &#60;= 4
   # cstr2: -2*x2 + 3*x3 + 4*x4 &#62;= 3
   # cstr3: 2*x1 + 2.5*x5 -1.5*x6 = 2.5

   $newsense-&#62;[0] = &#39;E&#39;;
   $newsense-&#62;[1] = &#39;L&#39;;
   $lp-&#62;chgrhs($newrhs);

   # system after executing chgrhs()
   # cstr1: 3*x1 -2*x4 + 4x6 = 4
   # cstr2: -2*x2 + 3*x3 + 4*x4 &#60;= 3
   # cstr3: 2*x1 + 2.5*x5 -1.5*x6 = 2.5</pre>

<p>The CPLEX Version 12.5 supports the following values for the sense of a column:</p>

<pre>    &#39;L&#39;     the new sense is &#60;=
    &#39;E&#39;     the new sense is =
    &#39;G&#39;     the new sense is &#62;=
    &#39;R&#39;     the constraint is ranged</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chglbs"
>chglbs</a></h2>

<p>Change lower bounds of columns. The method expects the data to be passed in form of an array reference. Undefined values of the array are ignored by <code>chglbs</code>. If an error occurred, the <code>undef</code> value is returned.</p>

<pre>    # change lower bound of second column
    my $new_lower_bounds = [undef, 0.2];
    die &#34;ERROR: chglbs() failed\n&#34; unless $lp-&#62;chglbs($new_lower_bounds);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="chgubs"
>chgubs</a></h2>

<p>Change upper bounds of columns. The method expects the data to be passed in form of an array reference. Undefined values of the array are ignored by <code>chglbs</code>. If an error occurred, the <code>undef</code> value is returned.</p>

<pre>    # change upper bound of first and third column
    my $new_upper_bounds = [2.5, undef, 3.1415926];
    die &#34;ERROR: chgubs() failed\n&#34; unless $lp-&#62;chgubs($new_upper_bounds);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delcols"
>delcols</a></h2>

<p>The delete a continuous set of columns. The method expects two parameters: a) the first index of the columns to be deleted and b) the last index of the columns to be deleted. The method returns <code>undef</code> if an error occurred.</p>

<pre>   # delete the second column of a system
   $lp-&#62;delcols(1,1);

   # delete the second and the third column
   $lp-&#62;delcols(1,2);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="delrows"
>delrows</a></h2>

<p>The delete a continuous set of rows. The method expects two parameters: a) the first index of the rows to be deleted and b) the last index of the rows to be deleted. The method returns <code>undef</code> if an error occurred.</p>

<pre>   # delete the first row of a system
   $lp-&#62;delrows(0,0);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="dualopt"
>dualopt</a></h2>

<p>Find a solution to a optimization problem using the dual simplex algorithm. The method returns <code>undef</code> if an error occurred.</p>

<pre>   $lp-&#62;dualopt();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="free"
>free</a></h2>

<p>Free the resource allocated by an optimization problem. The method returns <code>undef</code> if an error occured.</p>

<pre>   $lp-&#62;free();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getnumbin"
>getnumbin</a></h2>

<p>Get the number of binary variables of the system. The method returns zero if an error occurred.</p>

<pre>   my $num_bin = $lp-&#62;getnumbin();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getnumcols"
>getnumcols</a></h2>

<p>Get number of columns of the system. The method returns zero if an error occurred.</p>

<pre>   my $num_cols = $lp-&#62;getnumcols();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getnumint"
>getnumint</a></h2>

<p>Get number of integer variables of the system. The method returns zero if an error occurred.</p>

<pre>   my $num_int = $lp-&#62;getnumint();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getnumnz"
>getnumnz</a></h2>

<p>Get number of non-zero elemens in the constraint matrix. The method returns zero if an error occurred. Note that the returned value does not include the objective function, quadratic constraints, or the bounds constraints on the variables.</p>

<pre>   my $num_nonzero_elems = $lp-&#62;getnumnz();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getnumrows"
>getnumrows</a></h2>

<p>Get number of rows in the constraint matrix. Note that the returned value does not include the objective function, quadratic constraints, or the bounds constraints on the variables. The method returns zero if an error occurred.</p>

<pre>   my $num_rows = $lp-&#62;getnumrows();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getobjsen"
>getobjsen</a></h2>

<p>Get the objective sense of the problem (minimization or maximization). The returned value is either: a) CPX_MIN=1 for minimization, b) CPX_MAX=-1 for maximization, or c) 0 if a problem occurred.</p>

<pre>   my $obj_sense = $lp-&#62;getobjsen();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getobjval"
>getobjval</a></h2>

<p>Get the objective value of the solution. Returns <code>undef</code> if an error occurred.</p>

<pre>   my $obj_val = $lp-&#62;getobjval();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getqpcoef"
>getqpcoef</a></h2>

<p>Get a coefficient in the quadratic coefficient matrix of a CPLEX problem. The method expects two input parameters: a) the row index and c) the column. The method returns 0 if an error occurred.</p>

<pre>   # objective function: x1 + 2 x2 + 3 x3 + [ - 33 x1 ^2 + 12 x1 * x2 - 22 x2 ^2 + 23 x2 * x3 - 11 x3 ^2 ] / 2
   # linear part: [1, 2, 3]
   # quadratic part: [[-33.0,   6.0,   0.0],
   #                  [  6.0, -22.0,  11.5],
   #                  [  0.0,  11.5, -11.0]];

   # obtained value of quadratic coefficient for x3^2:
   $row_idx = 2;
   $col_idx = 2;
   my $coef = $lp-&#62;getqpcoef($row_idx, $col_idx);
   print &#34;coef=$coef\n&#34; # prints: coef=-11

   # obtained value of mixed quadratic coefficient x2*x3 which is 11.5
   print &#34;coef x2*x3: &#34;, $lp-&#62;getqpcoef(1,2),&#34;\n&#34;;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getsolnpoolnumreplaced"
>getsolnpoolnumreplaced</a></h2>

<p>Get the number of solutions replaced in the solution pool. Returns 0 if an error occurred.</p>

<pre>   my $replaced = $lp-&#62;getsolnpoolnumreplaced();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getsolnpoolnumsolns"
>getsolnpoolnumsolns</a></h2>

<p>Get number of solutions in the solution pool. Returns 0 if an error occurred.</p>

<pre>   my $num_sols = $lp-&#62;getsolnpoolnumsolns();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getsolnpoolobjval"
>getsolnpoolobjval</a></h2>

<p>Get the objective value of a solution in the solution pool. The method expects one input paramter: the index of the objective value to be retrieved. An index value of -1 specifies that the incumbent should be used instead of a solution pool member. The method returns <code>undef</code> if an error occurred.</p>

<pre>   for( my $i = 0; $i &#60; $lp-&#62;getsolnpoolnumsolns(); $i++ )
   {
      my $objval = $lp-&#62;getsolnpoolobjval($i);
      ...
   }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getsolnpoolx"
>getsolnpoolx</a></h2>

<p>Get the solution vector for a solution in the solution pool. The method expects one input paramter: the index of the objective value to be retrieved. An index value of -1 specifies that the incumbent should be used instead of a solution pool member. The method returns a list that contains the values of the problem variables for the specified solution. The method returns <code>undef</code> if an error occurred.</p>

<pre>   for( my $i = 0; $i &#60; $lp-&#62;getsolnpoolnumsolns(); $i++ )
   {
      my @sol_vector = $lp-&#62;getsolnpoolx($i);
      ...
   }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="getstat"
>getstat</a></h2>

<p>Get the solution status of the problem after a linear, quadratic, quadratic constraint, or mixed integer optimization. Returns zero if an error occurred.</p>

<pre>   my $stat = $lp-&#62;getstat();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="lpopt"
>lpopt</a></h2>

<p>Find the solution of a linear problem. The parameter CPX_PARAM_LPMETHOD controls the choice of optimizer (dual simplex, primal simplex, barrier, network simplex, sifting, or concurrent optimization). The method returns <code>undef</code> if an error occurred.</p>

<pre>   $lp-&#62;lpopt();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="maximize"
>maximize</a></h2>

<p>Tell CPLEX that the objective function needs to be maximized.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="minimize"
>minimize</a></h2>

<p>Tell CPLEX that the objective function needs to be minimized.</p>

<pre>   $lp-&#62;minimize();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="mipopt"
>mipopt</a></h2>

<p>Solve a mixed integer program (MIP). Note that even if all columns are defined as continuous (&#39;C&#39;), CPLEX assumes that it deals with a MIP problem and requires to use <code>mipopt()</code>.</p>

<pre>   $lp-&#62;mipopt();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<p><code>new()</code> is the constructor of the module <code>Math::CPLEX::OP</code>. It assumed that this method is not directly called, but via the method <code>createOP</code> of a <code>Math::CPLEX::Env</code> object. The method <code>Math::CPLEX::Env::createOP</code> calls the constructor <code>new</code> of <code>Math::CPLEX::OP</code>. The method returns <code>undef</code> if not successful.</p>

<pre>   my $cplex_env = Math::CPLEX::Env-&#62;new();
   my $lp = $cplex_env-&#62;createOP();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="newcols"
>newcols</a></h2>

<p>Define the columns of an optimization problem. Data are passed to <code>newcols</code> as a hash reference. The method returns <code>undef</code> if not successful.</p>

<pre>   my $cols = {num_cols  =&#62; 2,
               obj_coefs =&#62; [ 0.6,  0.5]};
   $lp-&#62;newcols($cols);</pre>

<p>The method <code>newcols</code> supports the folloing parameters: <code>num_cols</code>, <code>obj_coefs</code>, <code>lower_bnd</code>, <code>upper_bnd</code>, <code>col_types</code>, and <code>col_types</code>:</p>

<pre>   my $cols = { num_cols  =&#62; 3,
                obj_coefs =&#62; [ 1.0,  0.5,  0.3],
                lower_bnd =&#62; [ 0.0,  1.0,  0.0],
                upper_bnd =&#62; [10.0,  9.0,  1.0],
                col_types =&#62; [ &#39;C&#39;,  &#39;I&#39;,  &#39;B&#39;],
                col_names =&#62; [&#39;c1&#39;, &#39;c2&#39;, &#39;c3&#39;]};
   $lp-&#62;newcols( $cols );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="populate"
>populate</a></h2>

<p>Execute the CPLEX populate solver. The populate feature allows to generate/enumerate multiple solutions via a single function call. The method returns <code>undef</code> if not successful.</p>

<pre>   $lp-&#62;populate();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="primopt"
>primopt</a></h2>

<p>Execute the primal simplex method of CPLEX to find a solution for the optimization problem. The method returns <code>undef</code> if not successful.</p>

<pre>   $lp-&#62;primopt();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="qpopt"
>qpopt</a></h2>

<p>Execute the quadratic solver of CPLEX. The method returns <code>undef</code> if not successful.</p>

<pre>   $lp-&#62;qpopt();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="setqpcoef"
>setqpcoef</a></h2>

<p>Set the quadratic part of the objective function. The method returns <code>undef</code> if not successful. In oder to obtain an objective function <i>x1 + 2 x2 + 3 x3 + [ - 33 x1 ^2 + 12 x1 * x2 - 22 x2 ^2 + 23 x2 * x3 - 11 x3 ^2 ] / 2</i>, the linear and the quadratic parts must be set in two steps. First, the linear part of the objective function is set via the <code>newcols()</code> methods. Second, the quadratic part is set:</p>

<pre>   # linear part
   my $cols = {num_cols  =&#62; 3,
               obj_coefs =&#62; [ 1, 2, 3]};
   $lp-&#62;newcols($cols);

   # quadratic part
   my $quad_coef = [[-33.0,   6.0,   0.0],
                    [  6.0, -22.0,  11.5],
                    [  0.0,  11.5, -11.0]];
   $lp-&#62;setqpcoef($quad_coef);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="solninfo"
>solninfo</a></h2>

<p>Get the solution information. The solution information is produced by <code>lpopt</code>, <code>primopt</code>, <code>dualopt</code>, <code>mipopt</code>, <code>qpopt</code>, and <code>baropt</code>. The method returns a list of for values which represent the solution method, the solution type, a variable indicating if the current solution is known to be primal feasible, and a variable indicating if the current solution is known to be dual feasible. See the CPLEX documention for further details. The method returns <code>undef</code> if not successful.</p>

<pre>   ($solnmethod, $solntype, $pfeasind, $dfeasind) = $lp-&#62;solninfo();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="solution"
>solution</a></h2>

<p>Obtain the current solution of a performed optimization procedure. The method returns the solution status, the optimal objective value, and the values of the variables of the optimized problem.</p>

<pre>   ($sol_status, $obj_val, @vals) = $lp-&#62;solution();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="solwrite"
>solwrite</a></h2>

<p>Write the current solution to a text file. The input parameter of <code>solwrite</code> is the name of the file to be written. The method returns <code>undef</code> if an error occurred.</p>

<pre>   $lp-&#62;solwrite(&#34;/tmp/lp_solution.txt&#34;);</pre>

<p>The content of the text file might look as follows:</p>

<pre>   &#60;?xml version = &#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&#62;
   &#60;CPLEXSolution version=&#34;1.2&#34;&#62;
    &#60;header
      problemName=&#34;perlOP&#34;
      solutionName=&#34;incumbent&#34;
      solutionIndex=&#34;-1&#34;
      objectiveValue=&#34;12.2&#34;
      solutionTypeValue=&#34;3&#34;
      solutionTypeString=&#34;primal&#34;
      solutionStatusValue=&#34;101&#34;
      solutionStatusString=&#34;integer optimal solution&#34;
      solutionMethodString=&#34;mip&#34;
      primalFeasible=&#34;1&#34;
      dualFeasible=&#34;1&#34;
      MIPNodes=&#34;0&#34;
      MIPIterations=&#34;1&#34;
      writeLevel=&#34;1&#34;/&#62;
    &#60;quality
      epInt=&#34;1e-05&#34;
      epRHS=&#34;1e-06&#34;
      maxIntInfeas=&#34;0&#34;
      maxPrimalInfeas=&#34;1.33226762955019e-15&#34;
      maxX=&#34;8.9&#34;
      maxSlack=&#34;8.1&#34;/&#62;
    &#60;linearConstraints&#62;
     &#60;constraint name=&#34;row1&#34; index=&#34;0&#34; slack=&#34;1.62&#34;/&#62;
     &#60;constraint name=&#34;row2&#34; index=&#34;1&#34; slack=&#34;1.33226762955019e-15&#34;/&#62;
     &#60;constraint name=&#34;row3&#34; index=&#34;2&#34; slack=&#34;-8.1&#34;/&#62;
    &#60;/linearConstraints&#62;
    &#60;variables&#62;
     &#60;variable name=&#34;c1&#34; index=&#34;0&#34; value=&#34;8.9&#34;/&#62;
     &#60;variable name=&#34;c2&#34; index=&#34;1&#34; value=&#34;6&#34;/&#62;
     &#60;variable name=&#34;c3&#34; index=&#34;2&#34; value=&#34;1&#34;/&#62;
    &#60;/variables&#62;
   &#60;/CPLEXSolution&#62;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="solwritesolnpool"
>solwritesolnpool</a></h2>

<p>Write a solution file, using either the incumbent solution or a solution from the solution pool. The method takes two parameters: a) the solution index and b) the name of the file to be written. The incumbent solution is written if the solution index -1 is passed to the method. The method returns <code>undef</code> if an error occurred.</p>

<pre>   $sol_idx = 3;
   $lp-&#62;solwritesolnpool($sol_idx, &#34;/tmp/solution_$sol_idx.txt&#34;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="solwritesolnpoolall"
>solwritesolnpoolall</a></h2>

<p>Write all solution from a solution pool to a file. The method takes a single parameter: the name of the file to be written.</p>

<pre>   $lp-&#62;solwritesolnpoolall($sol_idx, &#34;/tmp/all_solutions.txt&#34;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="writeprob"
>writeprob</a></h2>

<p>Write the optimization problem to a text file. The first parameter specifies the filename, the second parameter the file format. If no file format is given, an &#39;LP&#39; file is written. The method returns 1 if sucessful, otherwise <code>undef</code>.</p>

<pre>   $lp-&#62;writeprob(&#34;/tmp/linprob.mps&#34;,&#34;MPS&#34;)
   $lp-&#62;writeprob(&#34;/tmp/linprob.lp&#34;)</pre>

<p>CPLEX Version 12.5 supports the following file formats:</p>

<pre>   &#34;SAV&#34;  Binary SAV file  
   &#34;MPS&#34;  MPS format, original format  
   &#34;LP&#34;  CPLEX LP format, original format  
   &#34;RMP&#34;  MPS file, generic names  
   &#34;REW&#34;  MPS file, generic names  
   &#34;RLP&#34;  LP file, generic names  </pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Examples"
>Examples</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Simple_linear_program"
>Simple linear program</a></h2>

<p>A simple linear program where all columns are of &#39;continuous&#39; type. In order to optimize the sytem, lpopt() can be used. Note that CPLEX assumes that a mixed integer problem (MIP) has to be solve, if the column type is explicitely specified - even if all of them are defined as continuous, e.g. col_types =&#62; [ &#39;C&#39;, &#39;C&#39;, &#39;C&#39;]. If CPLEX thinks it is dealing a MIP system, then <code>lpopt()</code> is not good enough and <code>mipopt()</code> needs to be used.</p>

<pre>   use Math::CPLEX::Env;
   use Math::CPLEX::Base;

   ################################################################################
   ################################################################################
   my $cplex_env = Math::CPLEX::Env-&#62;new();
   die &#34;ERROR: openCPLEX() failed!&#34; unless $cplex_env;
   ################################################################################

   ################################################################################
   ################################################################################
   my $lp = $cplex_env-&#62;createOP();
   die &#34;ERROR: couldn&#39;t create Linear Program\n&#34; unless $lp;
   ################################################################################


   ################################################################################
   ################################################################################
   die &#34;ERROR: maximize() failed\n&#34; unless $lp-&#62;maximize();

   my $unbounded = &#38;Math::CPLEX::Base::CPX_INFBOUND;

   my $cols = {num_cols  =&#62; 2,
               obj_coefs =&#62; [ 0.6,  0.5]};
   die &#34;ERROR: newcols() failed\n&#34; unless $lp-&#62;newcols($cols);


   my $newRows;
   $newRows-&#62;[0][0] = 1.0;
   $newRows-&#62;[0][1] = 2.0;
   $newRows-&#62;[1][0] = 3.0;
   $newRows-&#62;[1][1] = 1.0;
   my $rows = {num_rows  =&#62; 2,
               rhs       =&#62; [1.0, 2.0],
               sense     =&#62; [&#39;L&#39;, &#39;L&#39;],
               row_coefs =&#62; $newRows};

   die &#34;ERROR: addrows() failed\n&#34; unless $lp-&#62;addrows($rows);
   ################################################################################


   ################################################################################
   ################################################################################
   my $filename = &#34;/tmp/myCPLEX.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);
   ################################################################################

   ################################################################################
   ################################################################################
   die &#34;ERROR: lpopt() failed\n&#34; unless $lp-&#62;lpopt();
   ################################################################################

   ################################################################################
   ################################################################################
   print &#34;INFO: getstat returned: &#34;, $lp-&#62;getstat(), &#34;\n&#34;;

   die &#34;ERROR: CPLEX couldn&#39;t find optimal solution&#34; unless $lp-&#62;getstat() == &#38;Math::CPLEX::Base::CPX_STAT_OPTIMAL;

   my ($sol_status, $obj_val, @vals) = $lp-&#62;solution();
   die &#34;ERROR: solution() failed\n&#34; unless defined $sol_status;
   print &#34;obj_val=$obj_val values: @vals\n&#34;;
   ################################################################################

   ################################################################################
   ################################################################################
   die &#34;ERROR: free() failed\n&#34; unless $lp-&#62;free();
   die &#34;ERROR: close() failed\n&#34; unless $cplex_env-&#62;close();
   ################################################################################</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Mixed_Integer_Linear_Program"
>Mixed Integer Linear Program</a></h2>

<p>A simple MIP problem that accesses some of CPLEX constants, sets and gets CPLEX parameters, uses several functions to modify the systems, and prints the non-default CPLEX parameters to a file. Note that the method <code>mipopt()</code> needs be used to optimize a MIP problem.</p>

<pre>   use Math::CPLEX::Env;
   use Math::CPLEX::Base;

   ################################################################################
   # access some of CPLEX constants
   ################################################################################
   my $param1 = &#38;Math::CPLEX::Base::CPX_INFBOUND;
   print &#34;CPX_INFBOUND= $param1\n&#34;;

   my $param2 = &#38;Math::CPLEX::Base::CPX_BIGINT;
   print &#34;CPX_BIGINT: $param2\n&#34;;

   my $cplex_unbounded = &#38;Math::CPLEX::Base::CPX_INFBOUND;
   ################################################################################


   ################################################################################
   # get a CPLEX environment and print the CPLEX version
   ################################################################################
   my $cplex_env = Math::CPLEX::Env-&#62;new();
   die &#34;ERROR: openCPLEX() failed!&#34; unless $cplex_env;

   my $version = $cplex_env-&#62;version();
   print &#34;CPLEX Version: $version\n&#34;;
   ################################################################################

   ################################################################################
   # set and get some CPLEX parameter (int/long/double/string)
   ################################################################################
   print &#34;CPX_PARAM_THREADS: &#34;, &#38;Math::CPLEX::Base::CPX_PARAM_THREADS, &#34;\n&#34;;
   if( $cplex_env-&#62;setintparam(&#38;Math::CPLEX::Base::CPX_PARAM_THREADS, 3) )
   {
      die &#34;setting parameter &#34;. &#38;Math::CPLEX::Base::CPX_PARAM_THREADS, &#34; to 3 failed\n&#34;;
   }
   print &#34;number of threads: &#34;, $cplex_env-&#62;getintparam(&#38;Math::CPLEX::Base::CPX_PARAM_THREADS), &#34;\n&#34;;

   print &#34;CPX_PARAM_ITLIM: &#34;, &#38;Math::CPLEX::Base::CPX_PARAM_ITLIM, &#34;\n&#34;;
   if( $cplex_env-&#62;setlongparam(&#38;Math::CPLEX::Base::CPX_PARAM_ITLIM, 1000000000000) )
   {
      die &#34;setting parameter &#34;. &#38;Math::CPLEX::Base::CPX_PARAM_ITLIM, &#34; to 3 failed\n&#34;;
   }
   print &#34;iteratiom limit: &#34;, $cplex_env-&#62;getlongparam(&#38;Math::CPLEX::Base::CPX_PARAM_ITLIM), &#34;\n&#34;;

   print &#34;CPX_PARAM_EPAGAP: &#34;, &#38;Math::CPLEX::Base::CPX_PARAM_EPAGAP, &#34;\n&#34;;
   if( $cplex_env-&#62;setdblparam(&#38;Math::CPLEX::Base::CPX_PARAM_EPAGAP, 1e-7) )
   {
      die &#34;setting parameter &#34;. &#38;Math::CPLEX::Base::CPX_PARAM_EPAGAP, &#34; to 1e-7 failed\n&#34;;
   }
   print &#34;MIP GAP: &#34;, $cplex_env-&#62;getdblparam(&#38;Math::CPLEX::Base::CPX_PARAM_EPAGAP), &#34;\n&#34;;

   print &#34;CPX_STR_PARAM_MAX: &#34;, &#38;Math::CPLEX::Base::CPX_STR_PARAM_MAX, &#34;\n&#34;;
   print &#34;CPX_PARAM_WORKDIR: &#34;, &#38;Math::CPLEX::Base::CPX_PARAM_WORKDIR, &#34;\n&#34;;
   if( $cplex_env-&#62;setstrparam(&#38;Math::CPLEX::Base::CPX_PARAM_WORKDIR, &#34;/tmp&#34;) )
   {
      die &#34;setting parameter &#34;. &#38;Math::CPLEX::Base::CPX_PARAM_WORKDIR, &#34; to &#39;/tmp&#39; failed\n&#34;;
   }
   print &#34;working directory: &#34;, $cplex_env-&#62;getstrparam(&#38;Math::CPLEX::Base::CPX_PARAM_WORKDIR), &#34;\n&#34;;
   ################################################################################


   ################################################################################
   # create a optimization problem
   ################################################################################
   my $lp = $cplex_env-&#62;createOP();
   die &#34;ERROR: couldn&#39;t create Linear Program\n&#34; unless $lp;
   ################################################################################


   ################################################################################
   # set up the optimization problem
   ################################################################################
   # we want to maximize our objective function
   die &#34;ERROR: maximize() failed\n&#34; unless $lp-&#62;maximize();

   # define columns
   my $cols = { num_cols  =&#62; 3,
                obj_coefs =&#62; [ 1.0,  0.5,  0.3],
                lower_bnd =&#62; [ 0.0,  1.0,  0.0],
                upper_bnd =&#62; [10.0,  9.0,  1.0],
                col_types =&#62; [ &#39;C&#39;,  &#39;I&#39;,  &#39;B&#39;],
                col_names =&#62; [&#39;c1&#39;, &#39;c2&#39;, &#39;c3&#39;]};
   die &#34;ERROR: newcols() failed\n&#34; unless $lp-&#62;newcols( $cols );


   # define rows
   my $newRows;
   $newRows-&#62;[0][0] = -0.3;
   $newRows-&#62;[0][2] =  1.3;
   $newRows-&#62;[1][0] =  0.7;
   $newRows-&#62;[1][1] = -1.3;
   $newRows-&#62;[1][2] =  2.9;
   $newRows-&#62;[2][1] =  2.0;
   $newRows-&#62;[2][2] = -3.1;
   my $rows = {&#39;num_rows&#39;  =&#62; 3,
               &#39;rhs&#39;       =&#62; [0.25, 1.33, 0.8],
               &#39;sense&#39;     =&#62; [&#39;L&#39;, &#39;E&#39;, &#39;G&#39;],
               &#39;row_names&#39; =&#62; [&#34;row1&#34;, &#34;row2&#34;, &#34;row3&#34;],
               &#39;row_coefs&#39; =&#62; $newRows};

   die &#34;ERROR: addrows() failed\n&#34; unless $lp-&#62;addrows($rows);
   ################################################################################


   ################################################################################
   # write optimization problem to file
   ################################################################################
   my $filename = &#34;/tmp/myCPLEX1.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);
   ################################################################################

   ################################################################################
   # use some of the supported get methods
   ################################################################################
   print &#34;number of rows: &#34;,$lp-&#62;getnumrows(),&#34;\n&#34;;
   print &#34;number of cols: &#34;,$lp-&#62;getnumcols(),&#34;\n&#34;;
   print &#34;number of bins: &#34;,$lp-&#62;getnumbin(),&#34;\n&#34;;
   print &#34;number of ints: &#34;,$lp-&#62;getnumint(),&#34;\n&#34;;
   print &#34;number of non-zeros: &#34;,$lp-&#62;getnumnz(),&#34;\n&#34;;
   print &#34;objective sense: &#34;,$lp-&#62;getobjsen(),&#34;\n&#34;;
   ################################################################################

   ################################################################################
   # write non-default CPLEX parameters to file
   ################################################################################
   $filename = &#34;/tmp/myCPLEX2.params&#34;;
   print &#34;INFO: going to write CPLEX parameter to &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeparams() failed\n&#34; unless $cplex_env-&#62;writeparams($filename);
   ################################################################################

   ################################################################################
   # optimize
   ################################################################################
   die &#34;ERROR:  mipopt() failed\n&#34; unless $lp-&#62;mipopt();
   ################################################################################

   ################################################################################
   # check status of optimization
   ################################################################################
   print &#34;INFO: getstat returned: &#34;, $lp-&#62;getstat(), &#34;\n&#34;;
   die &#34;ERROR: CPLEX couldn&#39;t find optimal solution&#34; unless $lp-&#62;getstat() == &#38;Math::CPLEX::Base::CPXMIP_OPTIMAL;
   ################################################################################

   ################################################################################
   # retrieve computed solution
   ################################################################################
   my ($sol_status, $obj_val, @vals) = $lp-&#62;solution();
   if( defined $sol_status )
   {
      print &#34;INFO: solution() was successful: sol_status=$sol_status obj_val=$obj_val\n&#34;;
      print &#34;                                 vals=@vals\n&#34;;
   }
   else
   {
      die &#34;INFO: solution() failed\n&#34;;
   }
   ################################################################################

   ################################################################################
   # write solution to file
   ################################################################################
   print &#34;INFO: writing solution to &#39;/tmp/lp_solution.txt&#39;\n&#34;;
   die &#34;ERROR: solwrite() failed\n&#34; unless $lp-&#62;solwrite(&#34;/tmp/lp_solution.txt&#34;);
   ################################################################################

   ################################################################################
   # retrieve solution info
   ################################################################################
   my @solinfo = $lp-&#62;solninfo();
   print &#34;solution info: @solinfo\n&#34;;
   ################################################################################


   ################################################################################
   # add two new columns to to system
   ################################################################################
   my $obj_coefs = [-0.3, 1.7];
   my $lower_bnd = [0.7, 0.2];
   my $upper_bnd = [$cplex_unbounded, 7.8];
   my $col_names = [&#39;newc1&#39;, &#39;newc2&#39;];
   my $col_coefs = [ [-0.2,  0.6],
                     [ 1.4,  1.1],
                     [ 0.5, -0.8]];
   my $newcols;
   $newcols = {num_cols  =&#62; 2,
               obj_coefs =&#62; $obj_coefs,
               col_coefs =&#62; $col_coefs,
               lower_bnd =&#62; $lower_bnd,
               upper_bnd =&#62; $upper_bnd,
               col_names =&#62; $col_names,};
   die &#34;ERROR: addcols() failed\n&#34; unless $lp-&#62;addcols($newcols);
   ################################################################################

   ################################################################################
   # change bound of columns
   ################################################################################
   # change lower bound of second column
   my $new_lower_bounds = [undef, 0.2];
   # change lower bound of first and third column
   my $new_upper_bounds = [2.5, undef, 3.1415926];
   die &#34;ERROR: chglbs() failed\n&#34; unless $lp-&#62;chglbs($new_lower_bounds);
   die &#34;ERROR: chgubs() failed\n&#34; unless $lp-&#62;chgubs($new_upper_bounds);
   ################################################################################

   ################################################################################
   # modify optimization problem using supported chgXXX methods
   ################################################################################
   my $newrhs-&#62;[1] = 6.66;
   die &#34;ERROR: chgrhs() failed\n&#34; unless $lp-&#62;chgrhs($newrhs);

   my $newctype = [&#39;B&#39;, undef , &#39;C&#39;];
   die &#34;ERROR: chgcypte() failed\n&#34; unless $lp-&#62;chgctype($newctype);

   my $newsense;
   $newsense-&#62;[0] = &#39;E&#39;;
   $newsense-&#62;[1] = &#39;E&#39;;
   $newsense-&#62;[2] = &#39;E&#39;;
   die &#34;ERROR: chgsense() failed\n&#34; unless $lp-&#62;chgsense($newsense);

   my $newobjcoef-&#62;[0] = -0.1111111;
   die &#34;ERROR: chgobj() failed\n&#34; unless $lp-&#62;chgobj($newobjcoef);
   ################################################################################

   ################################################################################
   # write modified problem to file
   ################################################################################
   $filename = &#34;/tmp/myCPLEX2.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);
   ################################################################################

   ################################################################################
   # modify optimization problem
   ################################################################################
   # delete the second column of system
   $lp-&#62;delcols(1,1);
   # delete the first row of system
   $lp-&#62;delrows(0,0);
   ################################################################################

   ################################################################################
   # write modified problem to file
   ################################################################################
   $filename = &#34;/tmp/myCPLEX3.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);
   ################################################################################

   ################################################################################
   # reset parameter settings
   ################################################################################
   die &#34;ERROR: setdefaults() failed\n&#34; if $cplex_env-&#62;setdefaults();
   ################################################################################

   ################################################################################
   # free problem resources
   ################################################################################
   die &#34;ERROR: freeOP() failed\n&#34; unless $lp-&#62;free();
   ################################################################################

   ################################################################################
   # close CPLEX environment
   ################################################################################
   die &#34;ERROR: closeCPLEX() failed\n&#34; unless $cplex_env-&#62;close();
   ################################################################################</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Linear_program_that_utilizes_CPLEX_populate_feature"
>Linear program that utilizes CPLEX populate feature</a></h2>

<p>CPLEX <i>populate</i> feature allows to generate/enumerate multiple solutions with just one subroutine call.</p>

<pre>   use Math::CPLEX::Env;
   use Math::CPLEX::Base;

   ################################################################################
   # get a CPLEX environment and print the CPLEX version
   ################################################################################
   my $cplex_env = Math::CPLEX::Env-&#62;new();
   die &#34;ERROR: openCPLEX() failed!&#34; unless $cplex_env;
   ################################################################################

   ################################################################################
   ################################################################################
   $cplex_env-&#62;setdblparam(&#38;Math::CPLEX::Base::CPX_PARAM_SOLNPOOLAGAP,0.1);
   $cplex_env-&#62;setdblparam(&#38;Math::CPLEX::Base::CPX_PARAM_SOLNPOOLGAP,1e-05);
   $cplex_env-&#62;setintparam(&#38;Math::CPLEX::Base::CPX_PARAM_SOLNPOOLINTENSITY,4);
   $cplex_env-&#62;setintparam(&#38;Math::CPLEX::Base::CPX_PARAM_SOLNPOOLCAPACITY ,10000);
   $cplex_env-&#62;setintparam(&#38;Math::CPLEX::Base::CPX_PARAM_POPULATELIM ,10000);
   print &#34;write parameters to &#39;/tmp/populate_params.txt&#39;\n&#34;;
   $cplex_env-&#62;writeparams(&#39;/tmp/populate_params.txt&#39;);
   ################################################################################


   ################################################################################
   # create a optimization problem
   ################################################################################
   my $lp = $cplex_env-&#62;createOP();
   die &#34;ERROR: couldn&#39;t create Linear Program\n&#34; unless $lp;
   ################################################################################


   ################################################################################
   # set up the optimization problem
   ################################################################################
   # we want to maximize our objective function
   die &#34;ERROR: maximize() failed\n&#34; unless $lp-&#62;maximize();

   # define columns
   my $cols = {num_cols  =&#62; 10,
               obj_coefs =&#62; [ 1.0,  1.0,  1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, ],
               col_types =&#62; [ &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, &#39;B&#39;, ]};
   die &#34;ERROR: newCols() failed\n&#34; unless $lp-&#62;newcols($cols);


   # define rows
   my $rhs       = [ 1.0, 2.0, 2.0, 4.0, 3.0, 2.0, 4.0, 4.0, 4.0, 2.0, 4.0 ];
   my $sense     = [ &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;,];
   my $row_coefs = [ [0,     0,     1,     0,     0,     0,     1,     0,     0,     0,],   # 2
                     [1,     1,     0,     0,     0,     0,     1,     0,     0,     0,],   # 3
                     [1,     0,     0,     0,     0,     1,     1,     0,     0,     0,],   # 3
                     [0,     0,     1,     0,     1,     1,     0,     1,     1,     0,],   # 5
                     [0,     0,     1,     1,     0,     0,     0,     1,     0,     1,],   # 4
                     [1,     0,     0,     0,     1,     0,     0,     0,     1,     0,],   # 3
                     [1,     1,     0,     1,     0,     0,     0,     1,     0,     1,],   # 5
                     [1,     0,     0,     1,     0,     1,     0,     1,     0,     1,],   # 5
                     [0,     1,     0,     0,     1,     1,     0,     1,     1,     0,],   # 5
                     [0,     1,     0,     0,     0,     1,     1,     0,     0,     0,],   # 3
                     [0,     1,     0,     1,     0,     1,     0,     1,     0,     1,],]; # 5

   my $rows = { num_rows  =&#62; 11,
                rhs       =&#62; $rhs,
                sense     =&#62; $sense,
                row_coefs =&#62; $row_coefs};

   die &#34;ERROR: addrows() failed\n&#34; unless $lp-&#62;addrows($rows);
   ################################################################################

   ################################################################################
   # optimize
   ################################################################################
   die &#34;ERROR:  populate() failed\n&#34; unless $lp-&#62;populate();
   ################################################################################

   ################################################################################
   # retrieve computed solution
   ################################################################################
   my $first_obj_val;
   my $num_sols = $lp-&#62;getsolnpoolnumsolns();
   print &#34;found $num_sols\n&#34;;
   for( my $i = 0; $i &#60; $num_sols; $i++ )
   {
      my $obj_val = $lp-&#62;getsolnpoolobjval($i);
      $first_obj_val = $obj_val if $i == 0;

      my @vals = $lp-&#62;getsolnpoolx($i);
      print &#34;   solution $i: obj_val: $obj_val, values: @vals\n&#34; if $obj_val == $first_obj_val;
   }
   ################################################################################

   ################################################################################
   # free problem resources
   ################################################################################
   die &#34;ERROR: freeOP() failed\n&#34; unless $lp-&#62;free();
   ################################################################################

   ################################################################################
   # close CPLEX environment
   ################################################################################
   die &#34;ERROR: closeCPLEX() failed\n&#34; unless $cplex_env-&#62;close();
   ################################################################################</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Optimization_problem_with_a_quadratic_objective_function"
>Optimization problem with a quadratic objective function</a></h2>

<p>A small example of an optimization problem that uses a quadratic objective function.</p>

<pre>   use Math::CPLEX::Env;
   use Math::CPLEX::Base;

   ################################################################################
   ################################################################################
   my $cplex_env = Math::CPLEX::Env-&#62;new();
   die &#34;ERROR: openCPLEX() failed!&#34; unless $cplex_env;
   ################################################################################

   ################################################################################
   ################################################################################
   my $lp = $cplex_env-&#62;createOP();
   die &#34;ERROR: couldn&#39;t create Linear Program\n&#34; unless $lp;
   ################################################################################


   ################################################################################
   ################################################################################
   die &#34;ERROR: maximize() failed\n&#34; unless $lp-&#62;maximize();

   my $unbounded = &#38;Math::CPLEX::Base::CPX_INFBOUND;

   my $cols = {num_cols  =&#62; 3,
               lower_bnd =&#62; [0],
               upper_bnd =&#62; [40],
               obj_coefs =&#62; [ 1, 2, 3]};
   die &#34;ERROR: newcols() failed\n&#34; unless $lp-&#62;newcols($cols);


   my $newRows = [[-1,  1,  1],
                  [ 1, -3,  1]];
   my $rows = {num_rows  =&#62; 2,
               rhs       =&#62; [20, 30],
               sense     =&#62; [&#39;L&#39;, &#39;L&#39;],
               row_coefs =&#62; $newRows};
   die &#34;ERROR: addrows() failed\n&#34; unless $lp-&#62;addrows($rows);

   # just set one single quadratic coefficient
   my $row_idx = 1;
   my $col_idx = 1;
   my $new_val = -6;
   die &#34;ERROR: chgqpcoef() failed\n&#34; unless $lp-&#62;chgqpcoef($row_idx, $col_idx, $new_val);

   # set the entire quadratic coefficient matrix matrix
   # we want to obtain the following objective function:
   # x1 + 2 x2 + 3 x3 + [ - 33 x1 ^2 + 12 x1 * x2 - 22 x2 ^2 + 23 x2 * x3 - 11 x3 ^2 ] / 2
   # enhane we need to set to coefficients for x1*x2 to 6 and for x2*x3 to 11.5!
   my $quad_coef = [[-33.0,   6.0,   0.0],
                    [  6.0, -22.0,  11.5],
                    [  0.0,  11.5, -11.0]];
   die &#34;ERROR: setqpcoef() failed\n&#34; unless $lp-&#62;setqpcoef($quad_coef);

   my $coef = $lp-&#62;getqpcoef($row_idx, $col_idx);
   die &#34;ERROR: getqpcoef() failed\n&#34; unless $coef;
   print &#34;objective coefficient at ($row_idx, $col_idx): $coef\n&#34;;
   ################################################################################


   ################################################################################
   ################################################################################
   my $filename = &#34;/tmp/myCPLEX.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);
   ################################################################################


   ################################################################################
   ################################################################################
   die &#34;ERROR: qppopt() failed\n&#34; unless $lp-&#62;qpopt();
   ################################################################################

   ################################################################################
   ################################################################################
   print &#34;INFO: getstat returned: &#34;, $lp-&#62;getstat(), &#34;\n&#34;;

   my ($sol_status, $obj_val, @vals) = $lp-&#62;solution();
   die &#34;ERROR: solution() failed\n&#34; unless defined $sol_status;
   print &#34;obj_val=$obj_val values: @vals\n&#34;;
   ################################################################################

   ################################################################################
   ################################################################################
   die &#34;ERROR: free() failed\n&#34; unless $lp-&#62;free();
   die &#34;ERROR: close() failed\n&#34; unless $cplex_env-&#62;close();
   ################################################################################</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Optimization_problem_with_a_quadratic_constraint"
>Optimization problem with a quadratic constraint</a></h2>

<p>The following example uses a) a quadratic objective function and b) a quadratic constraint.</p>

<pre>   use Math::CPLEX::Env;
   use Math::CPLEX::Base;

   ################################################################################
   ################################################################################
   my $cplex_env = Math::CPLEX::Env-&#62;new();
   die &#34;ERROR: openCPLEX() failed!&#34; unless $cplex_env;
   ################################################################################

   ################################################################################
   ################################################################################
   my $lp = $cplex_env-&#62;createOP();
   die &#34;ERROR: couldn&#39;t create Linear Program\n&#34; unless $lp;
   ################################################################################


   ################################################################################
   ################################################################################
   die &#34;ERROR: maximize() failed\n&#34; unless $lp-&#62;maximize();

   my $unbounded = &#38;Math::CPLEX::Base::CPX_INFBOUND;

   my $cols = {num_cols  =&#62; 3,
               lower_bnd =&#62; [0],
               upper_bnd =&#62; [40],
               obj_coefs =&#62; [ 1, 2, 3]};
   die &#34;ERROR: newcols() failed\n&#34; unless $lp-&#62;newcols($cols);


   my $newRows = [[-1,  1,  1],
                  [ 1, -3,  1]];
   my $rows = {num_rows  =&#62; 2,
               rhs       =&#62; [20, 30],
               sense     =&#62; [&#39;L&#39;, &#39;L&#39;],
               row_coefs =&#62; $newRows};
   die &#34;ERROR: addrows() failed\n&#34; unless $lp-&#62;addrows($rows);

   # set the entire quadratic coefficient matrix matrix
   # we want to obtain the following objective function:
   # x1 + 2 x2 + 3 x3 + [ - 33 x1 ^2 + 12 x1 * x2 - 22 x2 ^2 + 23 x2 * x3 - 11 x3 ^2 ] / 2
   # enhane we need to set to coefficients for x1*x2 to 6 and for x2*x3 to 11.5!
   my $quad_coef = [[-33.0,   6.0,   0.0],
                    [  6.0, -22.0,  11.5],
                    [  0.0,  11.5, -11.0]];
   die &#34;ERROR: setqpcoef() failed\n&#34; unless $lp-&#62;setqpcoef($quad_coef);

   # add a quadratic constraint to optimization problem
   # results in: 
   # new_quad: - 3 x1 + 1.5 x2 - 7.2 x3 + [ 0  * x1 - 2 x1 ^2 + 1.8 x1 * x2 - 1.5 x2 ^2 + 2.2 x2 * x3 - 1.3 x3 ^2 ] &#62;= 0.31415
   my $linval  = [-3.0,  1.5, -7.2];
   my $quadval = [[-2.0,  0.9,  0.0],
                  [ 0.9, -1.5,  1.1],
                  [ 0.0,  1.1, -1.3]];
   my $quad_constr = {linear =&#62; $linval,
                      rhs    =&#62; 0.31415,
                      sense  =&#62; &#39;G&#39;,
                      name   =&#62; &#39;new_quad&#39;,
                      quad   =&#62; $quadval};
   die &#34;ERROR: addqconstr() failed\n&#34; unless $lp-&#62;addqconstr($quad_constr);
   ################################################################################


   ################################################################################
   ################################################################################
   my $filename = &#34;/tmp/myCPLEX.lp&#34;;
   print &#34;INFO: going to write lp-file &#39;$filename&#39;\n&#34;;
   die &#34;ERROR: writeprob() failed\n&#34; unless $lp-&#62;writeprob($filename);
   ################################################################################

   ################################################################################
   ################################################################################
   die &#34;ERROR: qppopt() failed\n&#34; unless $lp-&#62;qpopt();
   ################################################################################

   ################################################################################
   ################################################################################
   print &#34;INFO: getstat returned: &#34;, $lp-&#62;getstat(), &#34;\n&#34;;

   my ($sol_status, $obj_val, @vals) = $lp-&#62;solution();
   die &#34;ERROR: solution() failed\n&#34; unless defined $sol_status;
   print &#34;obj_val=$obj_val values: @vals\n&#34;;
   ################################################################################

   ################################################################################
   ################################################################################
   die &#34;ERROR: free() failed\n&#34; unless $lp-&#62;free();
   die &#34;ERROR: close() failed\n&#34; unless $cplex_env-&#62;close();
   ################################################################################</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>Further information can be found in the CPLEX documentation.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Christian Jungreuthmayer, &#60;christian.jungreuthmayer@boku.ac.at&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright (C) 2013,2014 by Christian Jungreuthmayer</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.14.2 or, at your option, any later version of Perl 5 you may have available.</p>

<!-- end doc -->

</body></html>
